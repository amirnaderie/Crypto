{"version":3,"sources":["../static/js/19.5a4c5f59.chunk.js","components/MovieForm.jsx"],"names":["webpackJsonp","165","module","__webpack_exports__","__webpack_require__","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_joi_browser__","__WEBPACK_IMPORTED_MODULE_2_joi_browser___default","__WEBPACK_IMPORTED_MODULE_3__common_form__","__WEBPACK_IMPORTED_MODULE_4__services_movieService__","__WEBPACK_IMPORTED_MODULE_5__services_genreService__","__WEBPACK_IMPORTED_MODULE_6_react_toastify__","_createClass","defineProperties","target","props","i","length","descriptor","protoProps","staticProps","MovieForm","_Form","_ref","_temp","_this","_ret","_this2","_len","args","Array","_key","getPrototypeOf","concat","state","data","title","genreId","numberInStock","dailyRentalRate","releaseDate","genres","errors","schema","_id","a","string","required","label","number","min","max","handleCancel","history","push","doSubmit","mark","_callee","wrap","_context","prev","next","position","POSITION","TOP_LEFT","t0","stop","populateGenres","_ref3","_callee2","_ref4","_context2","sent","setState","populateMovie","_ref5","_callee3","movieId","_ref6","movie","_context3","match","params","id","abrupt","mapToViewModel","response","status","replace","componentDidMount","_ref7","_callee4","_context4","genre","createElement","className","onSubmit","handleSubmit","renderInput","renderSelect","renderDate","onClick","renderButton"],"mappings":"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","file":"static/js/19.5a4c5f59.chunk.js","sourcesContent":["webpackJsonp([19],{\n\n/***/ 165:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_joi_browser__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_joi_browser___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_joi_browser__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_form__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_movieService__ = __webpack_require__(161);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_genreService__ = __webpack_require__(166);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react_toastify__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react_toastify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react_toastify__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MovieForm=function(_Form){_inherits(MovieForm,_Form);function MovieForm(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,MovieForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=MovieForm.__proto__||Object.getPrototypeOf(MovieForm)).call.apply(_ref,[this].concat(args))),_this),_this.state={data:{title:\"\",genreId:\"\",numberInStock:\"\",dailyRentalRate:\"\",releaseDate:\"\"},genres:[],errors:{}},_this.schema={_id:__WEBPACK_IMPORTED_MODULE_2_joi_browser___default.a.string(),title:__WEBPACK_IMPORTED_MODULE_2_joi_browser___default.a.string().required().label(\"Title\"),genreId:__WEBPACK_IMPORTED_MODULE_2_joi_browser___default.a.string().required().label(\"Genre\"),numberInStock:__WEBPACK_IMPORTED_MODULE_2_joi_browser___default.a.number().required().min(0).max(100).label(\"Number in Stock\"),dailyRentalRate:__WEBPACK_IMPORTED_MODULE_2_joi_browser___default.a.number().required().min(0).max(10).label(\"نرخ روزانه\"),releaseDate:__WEBPACK_IMPORTED_MODULE_2_joi_browser___default.a.string().required().min(8).max(8).label(\"Date Of Release\")},_this.handleCancel=function(){_this.props.history.push(\"/movies\");},_this.doSubmit=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Object(__WEBPACK_IMPORTED_MODULE_4__services_movieService__[\"d\" /* saveMovie */])(_this.state.data);case 3:_context.next=5;return __WEBPACK_IMPORTED_MODULE_6_react_toastify__[\"toast\"].error('ثبت با موفقیت انجام پذیرفت',{position:__WEBPACK_IMPORTED_MODULE_6_react_toastify__[\"toast\"].POSITION.TOP_LEFT});case 5:_this.props.history.push(\"/movies\");_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);__WEBPACK_IMPORTED_MODULE_6_react_toastify__[\"toast\"].error('خطا در ثبت اطلاعات',{position:__WEBPACK_IMPORTED_MODULE_6_react_toastify__[\"toast\"].POSITION.TOP_LEFT});case 11:case\"end\":return _context.stop();}}},_callee,_this2,[[0,8]]);})),_temp),_possibleConstructorReturn(_this,_ret);}_createClass(MovieForm,[{key:\"populateGenres\",value:function(){var _ref3=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2(){var _ref4,genres;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Object(__WEBPACK_IMPORTED_MODULE_5__services_genreService__[\"a\" /* getGenres */])();case 2:_ref4=_context2.sent;genres=_ref4.data;this.setState({genres:genres});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function populateGenres(){return _ref3.apply(this,arguments);}return populateGenres;}()},{key:\"populateMovie\",value:function(){var _ref5=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee3(){var movieId,_ref6,movie;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;movieId=this.props.match.params.id;if(!(movieId===\"new\")){_context3.next=4;break;}return _context3.abrupt(\"return\");case 4:_context3.next=6;return Object(__WEBPACK_IMPORTED_MODULE_4__services_movieService__[\"b\" /* getMovie */])(movieId);case 6:_ref6=_context3.sent;movie=_ref6.data;this.setState({data:this.mapToViewModel(movie)});_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);if(_context3.t0.response&&_context3.t0.response.status===404)this.props.history.replace(\"/not-found\");case 14:case\"end\":return _context3.stop();}}},_callee3,this,[[0,11]]);}));function populateMovie(){return _ref5.apply(this,arguments);}return populateMovie;}()},{key:\"componentDidMount\",value:function(){var _ref7=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee4(){return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.populateGenres();case 2:_context4.next=4;return this.populateMovie();case 4:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _ref7.apply(this,arguments);}return componentDidMount;}()},{key:\"mapToViewModel\",value:function mapToViewModel(movie){return{_id:movie._id,title:movie.title,genreId:movie.genre._id,numberInStock:movie.numberInStock,dailyRentalRate:movie.dailyRentalRate,releaseDate:movie.releaseDate};}},{key:\"render\",value:function render(){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"div\",{className:\"col-md-5 container justify-content-center\"},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"h1\",null,\"Movie Form\"),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"form\",{onSubmit:this.handleSubmit},this.renderInput(\"title\",\"Title\"),this.renderSelect(\"genreId\",\"Genre\",this.state.genres),this.renderInput(\"numberInStock\",\"Number in Stock\",\"number\"),this.renderInput(\"dailyRentalRate\",\"Rate\"),this.renderDate(\"releaseDate\",\"Date Of Release\"),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"button\",{className:\"btn btn-primary m-3 pull-right\",onClick:this.handleCancel},\"Cancel\"),this.renderButton(\"Save\",true,\"btn btn-primary m-3 pull-left\")));}}]);return MovieForm;}(__WEBPACK_IMPORTED_MODULE_3__common_form__[\"default\"]);/* harmony default export */ __webpack_exports__[\"default\"] = (MovieForm);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/19.5a4c5f59.chunk.js","import React from \"react\";\nimport Joi from \"joi-browser\";\nimport Form from \"./common/form\";\nimport { getMovie, saveMovie } from \"../services/movieService\";\nimport { getGenres } from \"../services/genreService\";\nimport { toast } from \"react-toastify\";\n\n\n\n\nclass MovieForm extends Form {\n  state = {\n    data: {\n      title: \"\",\n      genreId: \"\",\n      numberInStock: \"\",\n      dailyRentalRate: \"\",\n      releaseDate:\"\",\n    },\n    genres: [],\n    errors: {},\n    \n  };\n\n  schema = {\n    _id: Joi.string(),\n    title: Joi.string()\n      .required()\n      .label(\"Title\"),\n    genreId: Joi.string()\n      .required()\n      .label(\"Genre\"),\n    numberInStock: Joi.number()\n      .required()\n      .min(0)\n      .max(100)\n      .label(\"Number in Stock\"),\n    dailyRentalRate: Joi.number()\n      .required()\n      .min(0)\n      .max(10)\n      .label(\"نرخ روزانه\"),\n    releaseDate: Joi.string()\n      .required()\n      .min(8)\n      .max(8)\n      .label(\"Date Of Release\")\n  };\n\n\n  \n \n\n  async populateGenres() {\n    const { data: genres } = await getGenres();\n    this.setState({ genres });\n  }\n\n  async populateMovie() {\n    try {\n      const movieId = this.props.match.params.id;\n      if (movieId === \"new\") return;\n\n      const { data: movie } = await getMovie(movieId);\n      this.setState({ data: this.mapToViewModel(movie) });\n    } catch (ex) {\n      if (ex.response && ex.response.status === 404)\n        this.props.history.replace(\"/not-found\");\n    }\n  }\n\n  async componentDidMount() {\n    await this.populateGenres();\n    await this.populateMovie();\n  }\n\n  handleCancel=()=>{\n    this.props.history.push(\"/movies\");\n  }\n  mapToViewModel(movie) {\n    return {\n      _id: movie._id,\n      title: movie.title,\n      genreId: movie.genre._id,\n      numberInStock: movie.numberInStock,\n      dailyRentalRate: movie.dailyRentalRate,\n      releaseDate: movie.releaseDate\n    };\n  }\n  \n  doSubmit = async () => {\n   try {\n    await saveMovie(this.state.data); \n    await toast.error('ثبت با موفقیت انجام پذیرفت', {position: toast.POSITION.TOP_LEFT});\n  \n    this.props.history.push(\"/movies\"); \n  } catch (error) {\n    toast.error('خطا در ثبت اطلاعات', {position: toast.POSITION.TOP_LEFT});\n   }\n  \n  };\n\n  render() {\n    return (\n     \n       <div className=\"col-md-5 container justify-content-center\">\n        <h1>Movie Form</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"title\", \"Title\")}\n          {this.renderSelect(\"genreId\", \"Genre\", this.state.genres)}\n          {this.renderInput(\"numberInStock\", \"Number in Stock\", \"number\")}\n          {this.renderInput(\"dailyRentalRate\", \"Rate\")}\n          {this.renderDate(\"releaseDate\", \"Date Of Release\")}\n          <button  className=\"btn btn-primary m-3 pull-right\" onClick={this.handleCancel}>Cancel</button>\n          {this.renderButton(\"Save\",true,\"btn btn-primary m-3 pull-left\")}\n          \n          \n        </form>\n      </div>\n     \n    );\n  }\n}\n\nexport default MovieForm;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/MovieForm.jsx"],"sourceRoot":""}