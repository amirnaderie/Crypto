{"version":3,"sources":["../static/js/11.8f3a8d00.chunk.js","components/RegisterForm.jsx","services/userService.js"],"names":["webpackJsonp","159","module","__webpack_exports__","__webpack_require__","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_joi_browser__","__WEBPACK_IMPORTED_MODULE_2_joi_browser___default","__WEBPACK_IMPORTED_MODULE_3__common_form__","__WEBPACK_IMPORTED_MODULE_4__services_userService__","__WEBPACK_IMPORTED_MODULE_5__services_authService__","__WEBPACK_IMPORTED_MODULE_6_react_toastify__","_createClass","defineProperties","target","props","i","length","descriptor","protoProps","staticProps","RegisterForm","_Form","_ref","_temp","_this","_ret","_this2","_len","args","Array","_key","getPrototypeOf","concat","state","data","username","password","name","errors","schema","a","string","required","email","label","min","doSubmit","mark","_callee","response","wrap","_context","prev","next","sent","loginWithJwt","headers","window","location","pathname","success","position","POSITION","TOP_LEFT","t0","status","assign","setState","stop","createElement","className","onSubmit","handleSubmit","renderInput","renderButton","507","register","user","__WEBPACK_IMPORTED_MODULE_0__httpService__","post","apiEndpoint"],"mappings":"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","file":"static/js/11.8f3a8d00.chunk.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 159:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_joi_browser__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_joi_browser___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_joi_browser__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__common_form__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_userService__ = __webpack_require__(507);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_authService__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react_toastify__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react_toastify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react_toastify__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var RegisterForm=function(_Form){_inherits(RegisterForm,_Form);function RegisterForm(){var _ref,_this2=this;var _temp,_this,_ret;_classCallCheck(this,RegisterForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=RegisterForm.__proto__||Object.getPrototypeOf(RegisterForm)).call.apply(_ref,[this].concat(args))),_this),_this.state={data:{username:\"\",password:\"\",name:\"\"},errors:{}},_this.schema={username:__WEBPACK_IMPORTED_MODULE_2_joi_browser___default.a.string().required().email().label(\"Username\"),password:__WEBPACK_IMPORTED_MODULE_2_joi_browser___default.a.string().required().min(5).label(\"Password\"),name:__WEBPACK_IMPORTED_MODULE_2_joi_browser___default.a.string().required().label(\"Name\")},_this.doSubmit=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(){var response,errors;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return __WEBPACK_IMPORTED_MODULE_4__services_userService__[\"a\" /* register */](_this.state.data);case 3:response=_context.sent;__WEBPACK_IMPORTED_MODULE_5__services_authService__[\"a\" /* default */].loginWithJwt(response.headers[\"x-auth-token\"]);if(window.location.pathname===\"/rentals\")__WEBPACK_IMPORTED_MODULE_6_react_toastify__[\"toast\"].success(\"ثبت با موفقیت انجام پذیرفت\",{position:__WEBPACK_IMPORTED_MODULE_6_react_toastify__[\"toast\"].POSITION.TOP_LEFT});else window.location=\"/movies\";_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0.response&&_context.t0.response.status===400){errors=Object.assign({},_this.state.errors);errors.username=_context.t0.response.data;_this.setState({errors:errors});__WEBPACK_IMPORTED_MODULE_6_react_toastify__[\"toast\"].error(\"خطا در ثبت اطلاعات\",{position:__WEBPACK_IMPORTED_MODULE_6_react_toastify__[\"toast\"].POSITION.TOP_LEFT});}case 11:case\"end\":return _context.stop();}}},_callee,_this2,[[0,8]]);})),_temp),_possibleConstructorReturn(_this,_ret);}_createClass(RegisterForm,[{key:\"render\",value:function render(){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"div\",{className:\"col-md-5 container justify-content-center\"},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"h1\",null,\"Register\"),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(\"form\",{onSubmit:this.handleSubmit},this.renderInput(\"username\",\"Username\"),this.renderInput(\"password\",\"Password\",\"password\"),this.renderInput(\"name\",\"Name\"),this.renderButton(\"Register\")));}}]);return RegisterForm;}(__WEBPACK_IMPORTED_MODULE_3__common_form__[\"default\"]);/* harmony default export */ __webpack_exports__[\"default\"] = (RegisterForm);\n\n/***/ }),\n\n/***/ 507:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = register;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__httpService__ = __webpack_require__(26);\nvar apiEndpoint=\"http://localhost:3900/api\"+\"/users\";function register(user){return __WEBPACK_IMPORTED_MODULE_0__httpService__[\"a\" /* default */].post(apiEndpoint,{email:user.username,password:user.password,name:user.name});}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/11.8f3a8d00.chunk.js","import React from \"react\";\nimport Joi from \"joi-browser\";\nimport Form from \"./common/form\";\nimport * as userService from \"../services/userService\";\nimport auth from \"../services/authService\";\nimport { toast } from \"react-toastify\";\n\nclass RegisterForm extends Form {\n  state = {\n    data: { username: \"\", password: \"\", name: \"\" },\n    errors: {},\n  };\n\n  schema = {\n    username: Joi.string().required().email().label(\"Username\"),\n    password: Joi.string().required().min(5).label(\"Password\"),\n    name: Joi.string().required().label(\"Name\"),\n  };\n\n  doSubmit = async () => {\n    try {\n      const response = await userService.register(this.state.data);\n      auth.loginWithJwt(response.headers[\"x-auth-token\"]);\n      if (window.location.pathname === \"/rentals\")\n        toast.success(\"ثبت با موفقیت انجام پذیرفت\", {\n          position: toast.POSITION.TOP_LEFT,\n        });\n      else window.location = \"/movies\";\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400) {\n        const errors = { ...this.state.errors };\n        errors.username = ex.response.data;\n        this.setState({ errors });\n        toast.error(\"خطا در ثبت اطلاعات\", {\n          position: toast.POSITION.TOP_LEFT,\n        });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"col-md-5 container justify-content-center\">\n        <h1>Register</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"username\", \"Username\")}\n          {this.renderInput(\"password\", \"Password\", \"password\")}\n          {this.renderInput(\"name\", \"Name\")}\n          {this.renderButton(\"Register\")}\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default RegisterForm;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/RegisterForm.jsx","import http from \"./httpService\";\n\n\nconst apiEndpoint = process.env.REACT_APP_URL + \"/users\";\n\nexport function register(user) {\n  return http.post(apiEndpoint, {\n    email: user.username,\n    password: user.password,\n    name: user.name\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/userService.js"],"sourceRoot":""}